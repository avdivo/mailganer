<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>Новая рассылка</title>

</head>
<body>
  <div class="container">
    <h1>Новая рассылка</h1>
    <a href="{% url 'list' %}">
        <button class="btn btn-primary float-sm-right">Отмена</button>
    </a>
  </div>

  <div class="container">
    <form method="POST">
        {% csrf_token %}
        <div class="form-group">
            <label for="{{ form.name.id_for_label }}">{{ form.name.label }}</label>
            <input type="text" class="form-control" id="{{ form.name.id_for_label }}" name="{{ form.name.html_name }}" maxlength="32" placeholder="Введите название рассылки">
            {{ form.name.errors }}
        </div>
        <div class="form-group">
            <label for="{{ form.group.id_for_label }}">{{ form.group.label }}</label>
            <select class="form-control" name="{{ form.group.html_name }}" id="{{ form.group.id_for_label }}">
                {% for group in form.group.field.choices.queryset %}
                    <option value="{{ group.id }}">{{ group.group }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="{{ form.sample.id_for_label }}">{{ form.sample.label }}</label>
            <select class="form-control" name="{{ form.sample.html_name }}" id="{{ form.sample.id_for_label }}">
                {% for sample in form.sample.field.choices.queryset %}
                    <option value="{{ sample.id }}">{{ sample.sample }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="{{ form.date_of_completion.id_for_label }}">{{ form.date_of_completion.label }}</label>
            <input type="datetime-local" id="{{ form.date_of_completion.id_for_label }}" name="{{ form.date_of_completion.html_name }}">
            <small id="emailHelp" class="form-text text-muted">
                Если дата и время будет меньше текущих рассылка будет произведена немедленно</small></p>
        </div>

        <button type="submit" class="btn btn-primary float-sm-right">Рассылка</button>

    </form>

  </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>
        $(document).ready( function() {
            let d = new Date()
            d = d.toJSON().slice(0,10) + 'T' + new Date().toLocaleTimeString().slice(0,-3)
            $('input[type=datetime-local]').val(d);
        });
    </script>


</body>
</html>